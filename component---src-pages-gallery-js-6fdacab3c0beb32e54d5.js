(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{169:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(172),i=n(180),s=(n(181),n(178)),c=n(62),l=n(173),u=(n(192),n(216),n(41),n(40)),p=n.n(u),f=n(8),m=n.n(f),d=n(218),g=n.n(d),h=n(191),x=(n(45),n(201)),v=n.n(x),b=(n(202),n(203)),E=n.n(b),y=n(219),C=n.n(y),T="757319f46e13433a8d4fa9d5e9756c23",k=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={tipState:"null",textAnalysis:null,speech:null},n.getText=n.getText.bind(p()(n)),n.getSpeech=n.getSpeech.bind(p()(n)),n}m()(t,e);var n=t.prototype;return n.getText=function(){var e=E()(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://wordsapiv1.p.rapidapi.com/words/"+this.props.text,{method:"GET",headers:{"X-Mashape-Key":"5080d3efbamshec12540514e6f7fp1c9e13jsn231e10a8d2bb"}}).then(function(){var e=E()(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:t=e.sent,console.log(t),0!=t.success?(t.syllables&&(n=t.syllables.list.reduce(function(e,t){return e+" "+t}),console.log(n)),this.setState({textAnalysis:r.a.createElement("div",{className:C.a.textAnalysis},r.a.createElement("p",null,this.props.text),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Syllables: ",t.syllables.count),r.a.createElement("p",null,n)):null,t.pronunciation&&t.pronunciation.all?r.a.createElement("p",null,"Pronunciation: ",t.pronunciation.all):null,t.results&&t.results.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Definition:"),r.a.createElement("p",null,t.results[0].definition)):null)})):this.setState({textAnalysis:r.a.createElement("div",{className:C.a.textAnalysis},r.a.createElement("p",null,"Word not found!"))});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.getSpeech=function(){var e=E()(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(T),t=Math.abs(new Date-new Date(this.props.tokenTimestamp)),console.log(t),this.props.ttsToken&&!(t>54e4)){e.next=9;break}return console.log("getting new token!"),e.next=7,fetch("https://cors-anywhere.herokuapp.com/https://eastus.api.cognitive.microsoft.com/sts/v1.0/issueToken",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-length":0,"Ocp-Apim-Subscription-Key":T}}).then(function(){var e=E()(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:n=e.sent,this.props.saveTextToSpeechToken(n);case 9:return console.log(this.props.ttsToken),e.next=12,fetch("https://eastus.tts.speech.microsoft.com/cognitiveservices/v1",{method:"POST",headers:{"Content-Type":"application/ssml+xml","Content-length":0,Authorization:"Bearer "+this.props.ttsToken,"X-Microsoft-OutputFormat":"audio-24khz-160kbitrate-mono-mp3"},body:"\n            <speak version='1.0' xml:lang='en-US'><voice xml:lang='en-US' xml:gender='Female'\n            name='en-US-JessaRUS'>\n                "+this.props.text+"\n                </voice></speak>"}).then(function(){var e=E()(v.a.mark(function e(t){var n,a,r,o,i,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){return(i=E()(v.a.mark(function e(t){var n,a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Blob([t],{type:"audio/mp3"}),a=window.URL.createObjectURL(n),console.log(a),r=new Audio(a),e.next=6,r.play();case 6:return e.next=8,new Promise(function(e,t){r.onended=function(){e()}});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},n=t.body.getReader(),a=[];case 4:return e.next=6,n.read();case 6:r=e.sent,a.push(r.value);case 8:if(0==r.done){e.next=4;break}case 9:console.log(a),s=0;case 11:if(!(s<a.length)){e.next=24;break}if(!a[s]){e.next=21;break}return e.prev=13,e.next=16,o(a[s]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),console.log(e.t0);case 21:s++,e.next=11;break;case 24:case"end":return e.stop()}},e,null,[[13,18]])}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.log(e)});case 12:e.sent;case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:C.a.toolTip,style:{position:"fixed",top:this.props.top,left:this.props.left}},this.state.textAnalysis,r.a.createElement("div",{className:C.a.controls},r.a.createElement("button",{onClick:this.getSpeech},r.a.createElement("i",{className:"fas fa-file-audio"})),r.a.createElement("button",{onClick:this.getText},r.a.createElement("i",{className:"fas fa-align-left"})),r.a.createElement("button",{onClick:this.props.removeToolTip},r.a.createElement("i",{class:"fas fa-undo"})))))},t}(r.a.Component),w=Object(c.b)(function(e){return{ttsToken:e.ttsToken,tokenTimestamp:e.tokenTimestamp}},function(e){return{saveTextToSpeechToken:function(t){return e(Object(l.g)(t))}}})(k),N=n(10),S=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={textBoxes:[],cachedText:"",toolTip:null,imgLoaded:!1,textView:!1,captures:N.get("captures")},n.state.captures&&n.state.captures.length&&(n.state.captures=n.state.captures.reverse()),n.original=r.a.createRef(),n.imgLoad=n.imgLoad.bind(p()(n)),n.selectText=n.selectText.bind(p()(n)),n}m()(t,e);var n=t.prototype;return n.selectText=function(e){var t=this,n=window.getSelection();if(n.toString().length>0){this.setState({toolTip:null});var a=n.getRangeAt(0).getBoundingClientRect();this.setState({toolTip:r.a.createElement(w,{removeToolTip:function(){t.setState({toolTip:null})},text:n.toString(),top:a.top-35,left:a.left})})}},n.imgLoad=function(){var e=this;this.setState({textBoxes:[]});var t=[],n=[];this.state.captures[this.props.id].recognitionResult.lines.forEach(function(a){n.push(r.a.createElement("p",{key:a.text,onMouseDown:function(t){e.selectText(t)},onTouchStart:function(t){e.selectText(t)},style:{fontSize:e.props.size,color:e.props.readerColor,fontFamily:e.props.readerFont,lineHeight:e.props.readerLineHeight,letterSpacing:e.props.readerLetterSpacing+"px"}},a.text));var o=Math.atan2(a.boundingBox[3]-a.boundingBox[1],a.boundingBox[2]-a.boundingBox[0]);console.log(180*o/Math.PI),a.words.forEach(function(n){var a=n.boundingBox,i=e.original.current.getBoundingClientRect();t.push({str:n.text,el:r.a.createElement(h.a,{key:n.text+Math.random(),x:a[6]+i.x,y:a[7]+i.y-Math.abs(a[1]-a[7]),text:n.text,size:Math.abs(a[1]-a[7]),angle:o})})})}),this.setState({textBoxes:t,cachedText:n,imgLoaded:!0}),console.log(n)},n.render=function(){var e=this;return this.props.id?r.a.createElement(r.a.Fragment,null,this.state.textView?r.a.createElement("div",{className:g.a.textView},r.a.createElement("h1",{style:{textAlign:"center",margin:"50px 10px 25px"}},"TextView"),r.a.createElement("div",{style:{padding:"20px",backgroundColor:this.props.readerBgColor}},this.state.toolTip,this.state.cachedText)):null,this.state.textBoxes.map(function(e){return e.el}),r.a.createElement("div",{className:g.a.single},r.a.createElement("img",{ref:this.original,src:this.state.captures[this.props.id].originalImage,onLoad:this.imgLoad})),r.a.createElement("div",{className:g.a.controls},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.setState({textView:!1}),e.props.id>0&&Object(o.c)("/gallery/"+(Number(e.props.id)-1))}},r.a.createElement("i",{className:"fas fa-arrow-left"}))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.setState({textView:!1}),Object(o.c)("/gallery")}},r.a.createElement("i",{className:"fas fa-images"}))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){1==e.state.imgLoaded&&e.setState({textView:!e.state.textView})}},r.a.createElement("i",{className:"fas fa-file-alt"}))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.setState({textView:!1}),e.props.id<e.state.captures.length-1&&Object(o.c)("/gallery/"+(Number(e.props.id)+1))}},r.a.createElement("i",{className:"fas fa-arrow-right"}))))):r.a.createElement("div",{className:g.a.gallery},this.state.captures?r.a.createElement(r.a.Fragment,null,this.state.captures.map(function(e,t){return r.a.createElement(o.a,{to:"/gallery/"+t,key:"capture-"+t},r.a.createElement("img",{src:e.renderImage}))}),r.a.createElement("div",{className:g.a.controls},r.a.createElement("button",{onClick:function(){N.clearAll(),window.location.reload()}},r.a.createElement("h3",null,"Clear Gallery")))):r.a.createElement("h3",null,"No Captures here..."))},t}(r.a.Component),A=Object(c.b)(function(e){return{readerBgColor:e.readerBgColor,readerColor:e.readerColor,readerFont:e.readerFont,readerLineHeight:e.readerLineHeight,readerLetterSpacing:e.readerLetterSpacing}},null)(S);t.default=Object(c.b)(function(e){return{bgColor:e.bgColor}},function(e){return{changeBG:function(t){return e(Object(l.a)(t))}}})(function(e){e.changeBG("white");var t=e.location.pathname,n=t.substring(t.lastIndexOf("/")+1);return r.a.createElement(i.a,null,r.a.createElement(s.a,{title:"Home"}),r.a.createElement("h1",{style:{textAlign:"center",margin:"50px 10px 25px"}},"Gallery"),r.a.createElement(A,{id:isNaN(n)?null:n}))})},172:function(e,t,n){"use strict";n.d(t,"b",function(){return u});var a=n(0),r=n.n(a),o=n(1),i=n.n(o),s=n(39),c=n.n(s);n.d(t,"a",function(){return c.a}),n.d(t,"c",function(){return s.navigate});n(174);var l=r.a.createContext({}),u=function(e){return r.a.createElement(l.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};u.propTypes={data:i.a.object,query:i.a.string.isRequired,render:i.a.func,children:i.a.func}},173:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"g",function(){return p});var a=n(11),r=n(10);function o(e){return r.set("bgColor",e),{type:a.a,bgColor:e}}function i(e){return r.set("readerBgColor",e),{type:a.d,readerBgColor:e}}function s(e){return r.set("readerColor",e),{type:a.e,readerColor:e}}function c(e){return r.set("readerFont",e),{type:a.f,readerFont:e}}function l(e){return r.set("lineHeight",e),{type:a.c,lineHeight:e}}function u(e){return r.set("letterSpacing",e),{type:a.b,letterSpacing:e}}function p(e){r.set("ttsToken",e);var t=new Date;return r.set("tokenTimestamp",t),{type:a.g,ttsToken:e,tokenTimestamp:t}}},174:function(e,t,n){var a;e.exports=(a=n(176))&&a.default||a},175:function(e){e.exports={data:{site:{siteMetadata:{title:"EasyRead"}}}}},176:function(e,t,n){"use strict";n.r(t);n(30);var a=n(0),r=n.n(a),o=n(1),i=n.n(o),s=n(63),c=n(3),l=function(e){var t=e.location,n=c.default.getResourcesForPathnameSync(t.pathname);return n?r.a.createElement(s.a,Object.assign({location:t,pageResources:n},n.json)):null};l.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=l},177:function(e,t,n){e.exports=n.p+"static/reading-profile-667bb35fe9e05f79fe62d06332339c07.png"},178:function(e,t,n){"use strict";var a=n(179),r=n(0),o=n.n(r),i=n(1),s=n.n(i),c=n(188),l=n.n(c);function u(e){var t=e.description,n=e.lang,r=e.meta,i=e.title,s=a.data.site,c=t||s.siteMetadata.description;return o.a.createElement(l.a,{htmlAttributes:{lang:n},title:i,titleTemplate:"%s | "+s.siteMetadata.title,meta:[{name:"description",content:c},{property:"og:title",content:i},{property:"og:description",content:c},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:s.siteMetadata.author},{name:"twitter:title",content:i},{name:"twitter:description",content:c}].concat(r)},o.a.createElement("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.8.2/css/all.css",integrity:"sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay",crossorigin:"anonymous"}))}u.defaultProps={lang:"en",meta:[],description:""},u.propTypes={description:s.a.string,lang:s.a.string,meta:s.a.arrayOf(s.a.object),title:s.a.string.isRequired},t.a=u},179:function(e){e.exports={data:{site:{siteMetadata:{title:"EasyRead",description:"Make reading easier",author:"@squishy123"}}}}},180:function(e,t,n){"use strict";var a=n(175),r=n(0),o=n.n(r),i=n(1),s=n.n(i),c=n(172),l=(n(184),n(40)),u=n.n(l),p=n(8),f=n.n(p),m=n(62),d=n(173),g=n(185),h=n.n(g),x=(n(186),function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isCollapse:!1},n.toggleNav=n.toggleNav.bind(u()(n)),n}f()(t,e);var a=t.prototype;return a.toggleNav=function(){this.setState({isCollapse:!this.state.isCollapse})},a.render=function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:h.a.menuToggle+" hamburger hamburger--spin "+(this.state.isCollapse?"is-active":""),onClick:this.toggleNav,type:"button"},o.a.createElement("span",{className:"hamburger-box"},o.a.createElement("span",{className:"hamburger-inner "+("black"==this.props.bgColor?h.a.dark:h.a.light)}))),o.a.createElement("div",{className:h.a.navContainer+" "+(this.state.isCollapse?h.a.isActive:"")},o.a.createElement("div",{className:h.a.nav},o.a.createElement("div",{className:h.a.profile},o.a.createElement(c.a,{to:"/"},o.a.createElement("img",{src:n(177)})),o.a.createElement("h1",null,"Easyread"),o.a.createElement("p",null,"Welcome back!")),o.a.createElement("hr",null),o.a.createElement("ul",{className:h.a.pages},[{name:"Clipboard",url:"/clipboard"},{name:"Gallery",url:"/gallery"},{name:"Settings",url:"/settings"}].map(function(t){return o.a.createElement("li",{key:t.url,onClick:e.toggleNav},o.a.createElement(c.a,{className:h.a.page,activeClassName:h.a.pageActive,to:t.url},o.a.createElement("i",{className:"fas fa-heart fa-2x"}),o.a.createElement("p",null,t.name)))})))))},t}(o.a.Component)),v=Object(m.b)(function(e){return{bgColor:e.bgColor}},function(e){return{changeBG:function(t){return e(Object(d.a)(t))}}})(x),b=(n(187),function(e){var t=e.bgColor,n=(e.changeBG,e.children);return o.a.createElement(c.b,{query:"2924840780",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(v,null),o.a.createElement("div",{className:"main",style:{backgroundColor:t}},o.a.createElement("main",null,n),o.a.createElement("footer",null)))},data:a})});b.propTypes={children:s.a.node.isRequired};t.a=Object(m.b)(function(e){return{bgColor:e.bgColor}},function(e){return{changeBG:function(t){return e(Object(d.a)(t))}}})(b)},181:function(e,t,n){"use strict";n(182),n(0),n(172),n(183)},182:function(e){e.exports={data:{placeholderImage:null}}},191:function(e,t,n){"use strict";var a=n(8),r=n.n(a),o=n(0),i=n.n(o),s=n(62),c=function(e){function t(t){return e.call(this,t)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("div",{style:{backgroundColor:this.props.readerBgColor,zIndex:"1",position:"fixed",top:this.props.y,left:this.props.x,transform:"rotate("+(this.props.angle?this.props.angle:0)+"rad)"}},i.a.createElement("h1",{style:{margin:0,fontSize:this.props.size,color:this.props.readerColor,fontFamily:this.props.readerFont,lineHeight:this.props.readerLineHeight,letterSpacing:this.props.readerLetterSpacing+"px"}},this.props.text))},t}(i.a.Component);t.a=Object(s.b)(function(e){return{readerBgColor:e.readerBgColor,readerColor:e.readerColor,readerFont:e.readerFont,readerLineHeight:e.readerLineHeight,readerLetterSpacing:e.readerLetterSpacing}},null)(c)},192:function(e,t,n){"use strict";var a=n(6),r=n(31),o=n(18),i=n(193),s=n(84),c=n(22),l=n(190).f,u=n(189).f,p=n(29).f,f=n(195).trim,m=a.Number,d=m,g=m.prototype,h="Number"==o(n(88)(g)),x="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,a,r,o=(t=x?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+t}for(var i,c=t.slice(2),l=0,u=c.length;l<u;l++)if((i=c.charCodeAt(l))<48||i>r)return NaN;return parseInt(c,a)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof m&&(h?c(function(){g.valueOf.call(n)}):"Number"!=o(n))?i(new d(v(t)),n,m):v(t)};for(var b,E=n(21)?l(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;E.length>y;y++)r(d,b=E[y])&&!r(m,b)&&p(m,b,u(d,b));m.prototype=g,g.constructor=m,n(17)(a,"Number",m)}},193:function(e,t,n){var a=n(13),r=n(194).set;e.exports=function(e,t,n){var o,i=t.constructor;return i!==n&&"function"==typeof i&&(o=i.prototype)!==n.prototype&&a(o)&&r&&r(e,o),e}},194:function(e,t,n){var a=n(13),r=n(7),o=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{(a=n(23)(Function.call,n(189).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:o}},195:function(e,t,n){var a=n(14),r=n(24),o=n(22),i=n(196),s="["+i+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,n){var r={},s=o(function(){return!!i[e]()||"​"!="​"[e]()}),c=r[e]=s?t(p):i[e];n&&(r[n]=c),a(a.P+a.F*s,"String",r)},p=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},196:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},216:function(e,t,n){"use strict";n(217);var a=n(7),r=n(89),o=n(21),i=/./.toString,s=function(e){n(17)(RegExp.prototype,"toString",e,!0)};n(22)(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?s(function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)}):"toString"!=i.name&&s(function(){return i.call(this)})},217:function(e,t,n){n(21)&&"g"!=/./g.flags&&n(29).f(RegExp.prototype,"flags",{configurable:!0,get:n(89)})}}]);
//# sourceMappingURL=component---src-pages-gallery-js-6fdacab3c0beb32e54d5.js.map